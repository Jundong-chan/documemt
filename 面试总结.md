http2

传输文件 使用udp怎么实现数据的差错控制和可靠

Hash map 如果使用链地址法来解决碰撞，当数据集中在一个链表时怎么优化

MPG模型

问答类型的app 怎么设计后台架构

网页扫码登录怎么做 ， 流程是怎么样的。

如果让你设计 订单生成，异步通知用户结果 ，你会怎么做

grpc为什么选择使用http2来进行通信

数据库各个字段的使用

go的变量什么时候在栈上分配什么时候在堆上分配

对恶意攻击的ip进行封锁的原理

elastic search 是什么？



#### 1、http2

1、**传输格式**：将**请求和响应**转换成二进制的数据，解析和转换更高效，不用考虑传输数据的类型（相比1.1，需要在请求头中标明数据的类型）。
**帧**：在http层 和 TCP/UDP 层之间加一个 二进制帧层，进行数据的传输。最小传输单位，可以乱序发送，根据头部组装成消息。数据流以消息形式发送。

**流**：存在于一个连接中的虚拟通道，可以承载双向消息，每个流都有唯一的id

2、**双向传输**：同域名下所有通信都是在单个连接下完成（指的是某个客户端和该域名下的服务器），**可以承载任意数据量的双向数据流**

3、**多路复用**：http1.x中浏览器对同一个域名限制了6-8个TCP（同时维持），是用http2只需要一个连接。每一个请求还有优先级。

4、**服务器可以主动推送资源**（一般不随便推送资源）

5、**头部压缩**：客户端和服务器维护一个头部表，每次传输只需要传输发生改变的头部字段，并且首部进行了特殊的压缩方式



#### 2、手机端实现扫码登录网页版

- 网页版显示二维码，每生成一个二维码，都要生成一个唯一uid绑定这个二维码，确保这个二维码和扫到的用户做绑定，保证码的使用的唯一性。（在网页显示二维码的时候，可以做一个性能优化，预先将登陆后使用到的资源加载过来）
- 网页进行轮询服务器，查看这个uid下有没有绑定用户，超时则二维码超时。有结果则读取到用户的信息。
- 立即开始轮询对应接口获取用户的授权令牌，然后用来获取数据。





#### 3、进程间通信方式 IPC

管道、信号、信号量、共享内存、消息队列、socket

**管道**：通过一个管道文件，将前面的输出当作后面的输入来用。 比如管道命令

cat /etc/passwd | wc -l  

在进程间使用的时候，在管道中放数据等待另一个进程来取。

分为无名管道和命名管道

无名管道：管道是半双工的，可有缓冲区，只能用于父进程和兄弟进程之间。

命名管道：通过获取管道文件的路径就可以使用，支持双向，可用于本地和不同服务器。

**信号**：进程之间通过传输一个信号，根据信号的标志代表不同的信息，比如kill命令就是通过信号

**信号量**：用于进程间的多线程的通信，多用于线程之间结束的状态。

**共享内存：**通过本地创建一个共享的内存空间，多个进程进行数据共享，类似命名管道文件。

**消息队列：**开辟共享空间，先进先出传输消息。

**socket:* **  网络进程服务间通信。



#### 协程和线程的区别

一般来说，协程就像轻量级的线程。

线程一般有固定的栈，有一个固定的大小。而goroutines为了避免资源浪费（亦或是资源缺乏)，采用动态扩张收缩的策略：初始量为2k，最大可以扩张到1G。

每个线程都有一个id，在线程创建的时候就会被返回，所以我们可以通过线程的id来操纵线程。但是在golang中没有这个概念，因此我们在编码之初就要考虑协程的创建和释放问题。

线程和 goroutine 切换调度开销方面

线程/goroutine 切换开销方面，goroutine 远比线程小

线程：涉及模式切换(从用户态切换到内核态)、16个寄存器、PC、SP...等寄存器的刷新等。

因为协程在用户态由协程调度器完成，不需要陷入内核，这代价就小了。

所以goroutine：只有三个寄存器的值修改 - PC / SP / DX.

